# SQLiteë¥¼ í™œìš©í•œ ì•ˆë“œë¡œì´ë“œ ë©”ëª¨ì¥ ì•± 
ì¡°ì„ ëŒ€ 20ë…„ ê²¨ìš¸í•™ê¸° ì˜¤í”ˆì†ŒìŠ¤í”„ë¡œì íŠ¸ íŒ€í”„ë¡œì íŠ¸ 4ì¡°<br>
<br>

## ëª©ì 
### ê°œë°œ ì£¼ì œ
2í•™ë…„ë•Œ ë°°ìš´ **ìë°”** ì™€ 3í•™ë…„ 2í•™ê¸°ì— ë°°ìš´ **DB** ë¥¼ í™œìš©í•  ìˆ˜ ìˆëŠ” í”„ë¡œì íŠ¸ë¥¼ ì°¾ë‹¤ê°€ **'SQLiteë¥¼ ì‚¬ìš©í•œ ì•ˆë“œë¡œì´ë“œ ë©”ëª¨ì¥ ì–´í”Œ'** ì„ ë§Œë“¤ê²Œë˜ì—ˆë‹¤.
<br>

### Forkí•œ í”„ë¡œì íŠ¸
>[Hooooong/DAY14_SQLiteMemo](https://github.com/Hooooong/DAY14_SQLiteMemo)

<br>

### êµ¬í˜„ í™˜ê²½<br>

>ì•ˆë“œë¡œì´ë“œìŠ¤íŠœë””ì˜¤ 4.0.1 <br> Runtime version : 1.8.0 <br> VM : OpenJDK 64-Bit Server VM by JetBrains s.r.o

<br>

### ì£¼ìš” ì¼ì •
ë‹¨ê³„ | ì¼ì • | ì‚°ì¶œë¬¼
|:-----: | :-----: | :-----: |
ìš”êµ¬ì‚¬í•­ ë¶„ì„ ë° í”„ë¡œì íŠ¸ ê³„íš | 2021-01-17 | ê³„íšì„œ(ì£¼ì œ ì„ ì •, ìˆ˜ì •í•  ë ˆíŒŒì§€í† ë¦¬)
ì„¤ê³„ | 2021-01-17 ~ 2021-01-18 | ê¸°ì¡´ ì½”ë“œ ë¶„ì„ ìë£Œ ë° ìˆ˜ì • ë‚´ì—­ ê³„íšì„œ
êµ¬í˜„ | 2021-01-19 ~ 2021-01-20 | ì†ŒìŠ¤ ì½”ë“œ
í…ŒìŠ¤íŒ… | 2021-01-20 ~ 2021-01-21 | ì‹œì—° ì˜ìƒ ë° ë°œí‘œ ìë£Œ
ìœ ì§€ë³´ìˆ˜ | 2021-01-22 ~ |
<br>

### ğŸ‘©ğŸ»â€ğŸ’» íŒ€ì› êµ¬ì„± ğŸ‘©ğŸ»â€ğŸ’»

[![](https://images.velog.io/images/hanturtle/post/48ec6b69-5993-4748-9c9a-d6a8716a00d7/image.png)](https://github.com/Hanturtle)  | [![](https://images.velog.io/images/hanturtle/post/9cac4b4e-c9ea-49bf-b7a0-af67f78ad4e9/image.png)](https://github.com/shk2120)  | [![](https://images.velog.io/images/hanturtle/post/188e050e-f78e-4e6b-971b-d8bcb1e07717/image.png)](https://github.com/inhaaa)  | [![](https://images.velog.io/images/hanturtle/post/bd573aac-4902-4188-977a-ad5d339b10a3/image.png)](https://github.com/Jeongyeon999) 
--------- | --------- | --------- | ---------
í•œì§€ì› (íŒ€ì¥)| ê¹€ìˆ˜í˜„ | ë°•ì¸í•˜ | ìœ ì •ì—°
Fork í›„, ì „ì²´ ë²„ì „ ìˆ˜ì •<br>ì•¡í‹°ë¹„í‹° ë¶„í• <br>ì „ì²´ DB ê´€ë¦¬| DB ì‚­ì œ ê¸°ëŠ¥ êµ¬í˜„<br>ì•± ë””ìì¸ ìˆ˜ì • |DB ë“±ë¡ ê¸°ëŠ¥ êµ¬í˜„<br>ì•± ë””ìì¸ ìˆ˜ì • | DB ìˆ˜ì • ê¸°ëŠ¥ êµ¬í˜„<br>ì•± ì•„ì´ì½˜ ë“±ë¡

<br><br><br>

## ì„¤ê³„ ë° êµ¬í˜„
### ê¸°ì¡´ ì½”ë“œ ë¶„ì„
> [SQLiteë¥¼ ì‚¬ìš©í•œ ë©”ëª¨ì¥ ë§Œë“¤ê¸°](https://github.com/Hooooong/DAY14_SQLiteMemo/blob/master/README.md)

<br>

### ìˆ˜ì • ë‚´ì—­
> xmlì€ ê°„ë‹¨í•˜ê²Œ êµ¬ì„±ë§Œ ë³´ì—¬ì£¼ê³  ì†ŒìŠ¤íŒŒì¼ì— ìì„¸í•œ ì†ŒìŠ¤ ì£¼ì„ìœ¼ë¡œ ì„¤ëª…í•˜ì˜€ìŒ.


1. ì•¡í‹°ë¹„í‹° ë¶„í• í•˜ì—¬ ì œëª©ìœ¼ë¡œ ë©”ëª¨ ë¦¬ìŠ¤íŠ¸ ë§Œë“  í›„ í˜ì´ì§€ êµ¬í˜„ 
+ activity_main.xml
	- ë¦¬ìŠ¤íŠ¸ë·°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‘ì„±ëœ ì „ì²´ ë©”ëª¨ì˜ ì œëª©ë§Œ ë¶ˆëŸ¬ì˜¨ë‹¤.
``` xml
<ListView
        android:id="@+id/memo_list"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <com.google.android.material.floatingactionbutton.FloatingActionButton
        android:id="@+id/fab"/>
```
<br>

+ activity_action_memo.xml
	- ê°„ë‹¨í•œ TextView, EditText ë“±ì„ ì‚¬ìš©í•˜ì—¬ ë©”ëª¨ ì‘ì„± ë° ì½ê¸° í™”ë©´ì„ êµ¬ì„±í•˜ì˜€ë‹¤.
```
<LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:padding="16dp">
        
        <FrameLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:gravity="center_horizontal"
                android:orientation="horizontal">

                <TextView
                    android:id="@+id/tvTitleAM" />

            </LinearLayout>
        </FrameLayout>

        <TextView
            android:id="@+id/info_text" />

        <EditText
            android:id="@+id/title_edit" />

        <EditText
            android:id="@+id/content_edit"
            android:background="@drawable/border_text"/>

        <Button
            android:id="@+id/btnSaveAM" />


    </LinearLayout>
```
<br><br>

2. í”Œë¡œíŒ… ì‘ì—… ë²„íŠ¼ ì‚¬ìš©
+ activity_main.xml
	- [í”Œë¡œíŒ… ì‘ì—… ë²„íŠ¼](https://developer.android.com/guide/topics/ui/floating-action-button?hl=ko) ê°œë°œì ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì—¬ êµ¬í˜„í•˜ì˜€ë‹¤.
``` xml
<com.google.android.material.floatingactionbutton.FloatingActionButton
        android:id="@+id/fab"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_add_white_24dp"
        app:fabSize="auto"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintHorizontal_bias="0.9"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintVertical_bias="0.9" />
```
<br>

+ MainActivity.java
	- ì•± UIì˜ ê¸°ë³¸ ì‘ì—…ì„ íŠ¸ë¦¬ê±°í•˜ëŠ” ì›í˜• ë²„íŠ¼ì¸ í”Œë¡œíŒ… ë²„íŠ¼ì„ ì‚¬ìš©í•¨<br>ì´ ë²„íŠ¼ì„ í´ë¦­í•˜ì˜€ì„ë•Œ MemoActivityë¡œ ì•¡í‹°ë¹„í‹°ë¥¼ ë„˜ê²¨ì¤Œ
``` java
        FloatingActionButton floatingActionButton = findViewById(R.id.fab);
        floatingActionButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                startActivityForResult(new Intent(MainActivity.this, MemoActivity.class), REQUEST_CODE_INSERT);
            }
        });
```
<br><br>

3. ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ê°€ ì•„ë‹Œ ì•„ì´í…œì„ ê¾¹ ëˆŒë €ì„ ë•Œ ì‚­ì œë  ìˆ˜ ìˆë„ë¡ ë³€ê²½
+ MainActivity.java
	- ë²„íŠ¼ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì•„ì´í…œì„ ê¸¸ê²Œ í´ë¦­í•˜ì˜€ì„ë•Œ ì‚­ì œì°½ì„ ë„ìš°ê¸°
```java
listView.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {
    @Override
    public boolean onItemLongClick(AdapterView<?> adapterView, View view, int i, long l) {
        final long deleteId = l;

        AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
        builder.setTitle("ë©”ëª¨ ì‚­ì œ")
                .setMessage("ë©”ëª¨ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")
                .setPositiveButton("ì‚­ì œ", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialogInterface, int i) {
                        SQLiteDatabase database = MemoDbHelper.getInstance(MainActivity.this).getWritableDatabase();
                        //í…Œì´ë¸”ì´ë¦„ì´ Memo.dbì¸ í…Œì´ë¸”ì—ì„œ ì„ íƒí•œ idì— í•´ë‹¹í•˜ëŠ” ë‚´ìš©ì„ ì§€ìš´ë‹¤.
                        int deleteCount = database.delete(MemoContract.MemoEntry.TABLE_NAME,
                                MemoContract.MemoEntry._ID + " = " + deleteId, null);

                        //ì‚­ì œê°€ ì„±ê³µì ìœ¼ë¡œ ì´ë£¨ì–´ì¡ŒëŠ”ì§€ë¥¼ íŒë³„í•˜ê¸°ìœ„í•´ toastë¥¼ ë„ìš´ë‹¤.
                        if(deleteCount == 0){
                            Toast.makeText(MainActivity.this, "ì‚­ì œì— ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤", Toast.LENGTH_LONG).show();
                        } else{
                            Toast.makeText(MainActivity.this, "ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤", Toast.LENGTH_LONG).show();
                            mAdapter.swapCursor(getMemoCursor());
                        }
                    }
                })
                .setNegativeButton("ì·¨ì†Œ", null)
                .show();

        return true;
    }
});
```
<br>

4. ê¸°ëŠ¥ë³„ë¡œ ì˜ ì‘ë™í•˜ì˜€ëŠ”ì§€ Toast ë©”ì‹œì§€ ë„ìš°ê¸°
**DBê´€ë ¨ ì½”ë“œ ìˆ˜ì •** 
> [SQLite](https://developer.android.com/training/data-storage/sqlite?hl=ko#java) ê°œë°œììš© ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì˜€ìŒ.
+ ì¶”ê°€
    - MemoActivity.java
	``` java
	public void onClickMain(View view) {

	    //ì…ë ¥ë°›ì„ê²ƒì´ ì œëª©ê³¼ ë‚´ìš©ì´ë¯€ë¡œ ë¬¸ìì—´ ë³€ìˆ˜ ì„ ì–¸í•´ì¤Œ
	    String title = mTitleEditText.getText().toString();
	    String contents = mContentsEditText.getText().toString();

	    //ê¸€ì˜ ë²ˆí˜¸ëŠ” ìë™ìœ¼ë¡œ ìƒì„±ë˜ë¯€ë¡œ ì œëª©ê³¼ ë‚´ìš©ë§Œ ì¶”ê°€í•´ì¤€ë‹¤.
	    ContentValues contentValues = new ContentValues();
	    contentValues.put(MemoContract.MemoEntry.COLUMN_NAME_TITLE, title);
	    contentValues.put(MemoContract.MemoEntry.COMLUMN_NAME_CONTENTS, contents);

	    //dbì— ì¶”ê°€í•˜ê¸°
	    SQLiteDatabase db = MemoDbHelper.getInstance(this).getWritableDatabase();

		```
<br>
	- MemoDbHelper.java
<br>

	``` java
	//Memoì´ë¦„ì„ ê°€ì§„ DB ìƒì„±,title, contents í•„ë“œ í¬í•¨
	//ID ê°’ì€ ì •ìˆ˜í˜•ìœ¼ë¡œ ìë™ìœ¼ë¡œ ìƒì„±í•˜ì—¬ primary keyë¡œ ì„¤ì •í•¨
	private static final int DB_VERSION = 1;
	private static final String DB_NAME = "Memo.db";
	private static final String SQL_CREATE_ENTRIES =
		String.format("CREATE TABLE %s (%s INTEGER PRIMARY KEY AUTOINCREMENT, %s TEXT, %s TEXT)",
			MemoContract.MemoEntry.TABLE_NAME,
			MemoContract.MemoEntry._ID,
			MemoContract.MemoEntry.COLUMN_NAME_TITLE,
			MemoContract.MemoEntry.COMLUMN_NAME_CONTENTS);
	```
<br>

+ ì‚­ì œ
    - MemoDbHelper.java
<br>
        
	``` java
	//í…Œì´ë¸” ì‚­ì œ
	    private static final String SQL_DELETE_ENTRIES =
		    "DROP TABLE IF EXISTS " + MemoContract.MemoEntry.TABLE_NAME;
	```
<br>

+ MemoActivity.java
	- Toast ë©”ì‹œì§€ ë„ìš°ê¸°
	``` java
	//ì»¤ì„œëŠ” -1 ìœ„ì¹˜ì—ì„œ ì‹œì‘ í•¨
	if(mMemoId == -1) {
	    long newRowId = db.insert(MemoContract.MemoEntry.TABLE_NAME, null, contentValues);

	    //ì €ì¥ê´€ë ¨ ì†ŒìŠ¤ ì„±ê³µ ë° ì‹¤íŒ¨ toast ë„ì›Œì£¼ê¸°
	    if (newRowId == -1) {
		Toast.makeText(this, "ì €ì¥ì— ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤", Toast.LENGTH_LONG).show();
		;
	    } else {
		Toast.makeText(this, "ë©”ëª¨ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤", Toast.LENGTH_LONG).show();
		setResult(RESULT_OK);
	    }
	}

	//ìˆ˜ì • ê´€ë ¨ ì†ŒìŠ¤ ì„±ê³µ ë° ì‹¤íŒ¨ toast ë„ì›Œì£¼ê¸°
	else{
	    int count = db.update(MemoContract.MemoEntry.TABLE_NAME, contentValues,
		    MemoContract.MemoEntry._ID + "=" + mMemoId, null);

	    if(count == 0){
		Toast.makeText(this, "ìˆ˜ì •ì— ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤", Toast.LENGTH_LONG).show();
	    } else {
		Toast.makeText(this, "ë©”ëª¨ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤", Toast.LENGTH_LONG).show();
		setResult(RESULT_OK);
	    }
	}
	```
<br>

5. ì•± ì•„ì´ì½˜ ë³€ê²½ <br>
![](https://images.velog.io/images/hanturtle/post/f09fc218-7f5b-41ed-822f-f1075204f3ef/image.png) <br>
6. ì „ì²´ì ì¸ ë””ìì¸ í†µì¼
<br>![](https://images.velog.io/images/hanturtle/post/b2e1362c-39b8-4eb7-8744-0d5e61812a82/image.png)<br>
**ë¦¬ìŠ¤íŠ¸ ì•¡í‹°ë¹„í‹°, ë©”ëª¨ ì‘ì„± ì•¡í‹°ë¹„í‹°, ë©”ëª¨ ë³´ê¸° ì•¡í‹°ë¹„í‹°** <br>
![](https://images.velog.io/images/hanturtle/post/c28687e4-cce5-491b-93ea-31a667d6bb0f/image.png) <br>
**Toast ë©”ì‹œì§€, ì•„ì´í…œ ê¸¸ê²Œ í´ë¦­í•˜ì˜€ì„ë•Œ ë©”ëª¨ ì‚­ì œ** <br><br>

## ê²°ê³¼ë¬¼
### ì‹œì—° ì˜ìƒ
#### í…ŒìŠ¤íŠ¸ìš© í° ì‹œì—° ì˜ìƒ <br>
[![í…ŒìŠ¤íŠ¸ìš© í° ì‹œì—°ì˜ìƒ](https://img.youtube.com/vi/LQX-537yh3E/0.jpg)](https://www.youtube.com/watch?v=LQX-537yh3E&feature=youtu.be)
<br>

#### ì—ë®¬ë ˆì´í„° ì‹œì—° ì˜ìƒ <br>
[![ì—ë®¬ë ˆì´í„° ì‹œì—°ì˜ìƒ](https://img.youtube.com/vi/zHqHyl9sqew/0.jpg)](https://www.youtube.com/watch?v=zHqHyl9sqew&feature=youtu.be)

<br>

### ì•± ì„¤ì¹˜ ë§í¬
>[APK ë‹¤ìš´ë¡œë“œ](https://blog.naver.com/tjfdnjs0829/222214839904)

<br>
ë‹¤ìš´ë¡œë“œ í˜ì´ì§€ ëŒ“ê¸€ë¡œ í”¼ë“œë°±ì´ë‚˜ ì§ˆë¬¸ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤ ğŸ˜Š
<br><br>
